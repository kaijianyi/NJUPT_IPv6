# 该项目未完工！

# NJUPT_IPv6：科学上网

以仙林校区为例，我邮在学科楼、行政楼以及新青教部署了IPv6，采用双栈结构，用户只需直接接入校园网，就可以接入IPv6网，不需做硬件上的调整。

但是如果接入了二级路由，即使路由支持IPv6，但是设备依旧无法获取有效的IPv6地址。

通过我邮的IPv6可以直接科学上网，因此IPv6的配置还是很有必要的，目前提供以下三种方案使得路由支持IPv6。

# 方案一 使用老毛子Padavan固件(推荐)

## 1）前期准备工作，请参考[NJUPT_NET_2018](https://github.com/kaijianyi/NJUPT_NET_2018)项目的第一部分

## 2）控制台使用ifconfig，查看路由器的网卡名称

![image](/images/padavan/Padavan控制台.png)

## 3）添加IPv6配置

高级设置->自定义设置->脚本->在防火墙规则启动后执行，输入以下内容：

modprobe ip6table_mangle

ebtables -t broute -A BROUTING -p ! ipv6 -j DROP -i eth2.2(修改名称)

brctl addif br0 eth2.2(修改名称)

### 第一条命令：加载ip6table_mangle内核模块。
### 第二条命令：阻止内网对外网所有非IPV6流量的访问，即IPV4流量依然通过NAT。
### 第三条命令：让WAN口（eth2.1）成为内网（br0）的一个端口，这样做使得局域网内的主机与外网处于一个广播域，可以收到校园网网关的路由配置信息，每一台主机便可以得到一个全局的IPv6地址。

![image](/images/padavan/Padavan添加配置.png)

# 方案二 使用NAT6技术(不推荐)
### 该方案类似于IPv4的NAT技术，即路由器获取1个公网IPv6，路由器下设备获取若干子网IPv6，这里以Openwrt为例。

// TODO 补充

# 特别说明

### 1）本项目很多资源来自网上，均是开源项目，本人仅是收集整理，如有意见请联系我删除。

### 2）特别指出禁止任何个人或者公司将其投入商业使用，由此造成的后果和法律责任均与本人无关。
